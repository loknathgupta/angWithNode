<% include ../layout/header %>
<% var currentDate = new Date(); %>
    <!--Left Side Starts-->
    <div class="fix-left-side left-side-menu">
        <!--Logo Area Starts-->
        <% include ../layout/logo-section %>
            <!--Logo Area Ends-->
            <!--Left side Menu Starts-->
            <% include ../layout/left-menu %>
                <!--Left Menu Ends-->
    </div>
    <!--Left Side Ends-->
    

            <!--Header Right Menu starts-->
            <% include ../layout/header-right-menu %>
                <!--Header Right Menu Ends-->

        </div>
        <!--Right Side Header Ends-->

        <!--Content Wrapper Starts-->
        <div class="content-wrapper">
            
            <!-- Drag and Drog Functionality Div Starts-->
            <div class="sortable">
                <div class="col-md-12">
                    <!--editable starts-->
                    <div class="panel">
                        <div class="panel-heading">
                            User Access Control
                                  
                               
                                
                        </div>

                        <div class="panel-body">
                                
                                <div class="alert alert-danger fade in hidden">
                                        <a href="#" class="close alert-close" >&times;</a>
                                        <strong>Error!</strong> <span id="msg-div-error"></span>
                                    </div>
                                <div class="alert alert-success fade in <%=(messages.info?'':'hidden')%>">
                                        <a href="#" class="close alert-close" >&times;</a>
                                        <strong>Success!</strong> <span id="msg-div"><%=messages.info%></span>
                                       
                                    </div>
                                    
                            <form method="POST" id="access-lst-frm" action ="/access/saveAccess">
                           
                            
                                    
                                    <table class="table table-striped table-hover table-bordered display dataTable">
                                            <thead>
                                            <tr>
                                                    <th width="15%"></th>
                                                
                                                    <% userRole.forEach(function(role){
                                                        
                                                           
                                                        %>
                                                
                                                
                                                <th width="10%"><%=role.name %></th>
                                                
                                                <%  }); %>
                                            </tr>
                                            </thead>
                                            <tbody>
                                                    <% 
                                                    var ignoreArr = [10,16,17,18,20]
                                                    childMenu.forEach(function(row){ %>
                                            <tr>
                                                <td width="5%" ><%=row.module_name %> </td>
                                                <% userRole.forEach(function(role){
                                                    var checked ='';
                                                    var disabled = '';
                                                    if(role.short_name=='SA'){
                                                         checked ='checked';
                                                         disabled = 'disabled';
                                                    }
                                                        userModuleAccess.forEach(function(mAccess){
                                                             if(mAccess.role_id ==role.id && row.id ==mAccess.module_id){
                                                                checked ='checked'; 
                                                             }
                                                        });
                                                        if(ignoreArr.indexOf(row.id)>=0){
                                                            disabled = 'disabled';
                                                        }
                                                    %>
                                                <td width="10%"><input type="checkbox" name="<%=role.short_name %>" value ="<%=row.id %>" <%=checked%> <%=disabled%>></td>
                                                <%  }) %>
                                                
                                            </tr>
                                            <% }); %>
                                            
                                            </tbody>
                                        </table>
                                        <div class="pull-right save-button"><button id="add-price-open" class="btn btn-success pull-right" type="submit" >Save
                                        </button></div>
</form>
                        </div>
                    </div>
                </div>
                <!--Editable Table Ends-->

            </div>
        </div>
        <!-- Drag and Drog Functionality Div Starts-->
    </div>
    <!--Content Wrapper Ends-->
    
    <script src="<%=assetsLocation%>/js/monthlyr.js"></script>
    <% include ../layout/footer %>
      